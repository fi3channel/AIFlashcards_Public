<div class="min-h-screen flex flex-col bg-gray-900 text-white">
  <app-header></app-header>

  <div class="flex flex-col items-center p-6 pt-24 space-y-6">
    <form (ngSubmit)="onSubmit()" class="w-full max-w-lg space-y-6">
      <!-- Test Title -->
      <div>
        <label class="block text-lg font-semibold mb-2">Test Title</label>
        <input
          type="text"
          [(ngModel)]="selectedTest"
          name="title"
          required
          readonly
          class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-300 border border-gray-600 cursor-not-allowed"
        />
      </div>

      <!-- Number of Questions -->
      <div>
        <label class="block text-lg font-semibold mb-2">Number of Questions</label>
        <input
          type="number"
          [(ngModel)]="numberOfQuestions"
          name="questionsCount"
          (blur)="onNumberBlur($event)"
          required
          class="w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Questions -->
      <div class="space-y-4">
        <app-question-form
          *ngFor="let q of questions; let i = index"
          [index]="i + 1"
          [question]="q"
          (questionChange)="onQuestionChange(i, $event)"
          (removeQuestion)="onRemoveQuestion(i)"
          class="p-6"
        ></app-question-form>
      </div>

      <!-- Add Question Button -->
      <div class="flex justify-center pt-4">
        <div
          class="option-card w-16 h-16 flex items-center justify-center rounded-full bg-white/10 backdrop-blur-md hover:bg-white/20 transition cursor-pointer"
          (click)="onAddQuestion()"
        >
          <span class="text-2xl font-semibold text-green-400">+</span>
        </div>
      </div>
      <!-- Buttons -->
      <div class="flex justify-center gap-6 pt-6">
        <!-- Discard Button -->
        <div
          class="option-card w-full max-w-xs text-center py-4 px-6 rounded-xl bg-white/10 backdrop-blur-md hover:bg-white/20 transition cursor-pointer"
          (click)="onDiscard()"
        >
          <span class="text-lg font-semibold text-yellow-400">Discard</span>
        </div>

        <!-- Delete Button -->
        <div
          class="option-card w-full max-w-xs text-center py-4 px-6 rounded-xl bg-white/10 backdrop-blur-md hover:bg-white/20 transition cursor-pointer"
          (click)="onDelete()"
        >
          <span class="text-lg font-semibold text-red-400">Delete Test</span>
        </div>

        <!-- Update Test Button -->
        <div
          class="option-card w-full max-w-xs text-center py-4 px-6 rounded-xl bg-white/10 backdrop-blur-md hover:bg-white/20 transition cursor-pointer"
          (click)="onSubmit()"
        >
          <span class="text-lg font-semibold text-blue-400">Update Test</span>
        </div>
      </div>
    </form>
  </div>
</div>

<app-info-modal
  [visible]="modalVisible"
  [title]="modalTitle"
  [message]="modalMessage"
  (ok)="onOk()"
></app-info-modal>
